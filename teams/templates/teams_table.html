{% load i18n %}

<div id="table-container">
    {# Table component block#}
    {% component_block "table" id="teams_table" obj=teams label="Teams" not_found_msg="No Teams Found" %}
        {% fill "header" %}
            {% if teams|length > 0 %}
                <tr>
                    <th width="5%">{% trans 'ID' %}</th>
                    <th width="5%">{% trans 'Team Name' %}</th>
                    <th width="15%">{% trans 'Team Description' %}</th>
                    <th width="10%">{% trans 'Assigned To' %}</th>
                    <th width="5%">{% trans 'Created by' %}</th>
                    <th width="5%">{% trans 'Created On' %}</th>
                    <th width="10%"{% trans 'Actions' %}></th>
                </tr>
            {% endif %}
        {% endfill %}
        {# Modal window component block#}
        {% fill "data-target" %}
            {% for team in teams %}
                {% component_block "modal-form" obj=team title=team.name %}
                    {% fill "body" %}
                        <div class="col-md-8">
                            {% if team.name %}{% endif %}
                            {% if team.description %}
                                <div class="filter_col col-md-12">
                                    {% translate "Description" as team_description %}
                                    {% component "label" id="team_description" label=team_description value=team.description|default_if_none:"" %}
                                </div>
                            {% endif %}

                            <div class="filter_col col-md-12">
                                {% translate "Assigned To" as team_assigned_to %}
                                {% component "label" id="team_assigned_to" label=team_assigned_to %}
                                {% component "assigned-to" users=team.users href='common:view_user' %}
                            </div>

                            <div class="filter_col col-md-12">
                                <div class="form-group mt-3">
                                    {% translate "Created By" as team_created_by %}
                                    {% component "label" id="team_created_by" label=team_created_by value=obj.created_by %}
                                </div>
                            </div>

                            <div class="filter_col col-md-12">
                                {% translate "Created On" as team_created_on %}
                                {% component "label" id="team_created_on" label=team_created_on value=obj.created_on_arrow %}
                            </div>
                        </div>
                    {% endfill %}
                {% endcomponent_block %}
            {% endfor %}
        {% endfill %}

        {# Custom table fields component block  #}
        {% fill "body" %}
            {% for team in teams %}
                <tr class="text-center">
                    <td scope="row">{{ forloop.counter }}</td>
                    <td>
                        <a href="#" data-toggle="modal" data-target="#modal_form_{{ team.id }}">
                            {{ team.name }}
                        </a>
                    </td>
                    <td class="">
                        {% if team.description %}
                            {{ team.description }}
                        {% else %}
                            {% trans 'None' %}
                        {% endif %}
                    </td>
                    <td>
                        {% component "assigned-to" users=team.users href='common:view_user' %}
                    </td>
                    <td>
                        {% component "created-by" obj=team %}
                    </td>
                    <td title="{{ team.created_on }}">{{ team.created_on_arrow }}</td>
                    <td class="actions">
                        {% if request.user == team.created_by or request.user.role == 'ADMIN' or reques.user.is_superuser %}
                            {% component "btn-view" href='teams:team_detail' uri=team.id %}
                            {% component "btn-edit" href='teams:team_edit' uri=team.id %}
                            {% component "btn-delete" href='teams:team_delete' uri=team.id %}
                        {% endif %}
                    </td>
                </tr>
            {% endfor %}
        {% endfill %}
    {% endcomponent_block %}
</div>